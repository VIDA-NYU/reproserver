{% set current_page = 'webcapture_dashboard' %}

{% extends "base.html" %}

{% block content %}

<h1>Web Capture</h1>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean laoreet enim malesuada neque pellentesque, sit amet tincidunt tortor congue. Fusce cursus eleifend nunc ut feugiat. Ut ut mauris orci. Etiam bibendum magna nisi, non placerat turpis viverra quis. Suspendisse ut ligula volutpat, dignissim magna et, venenatis orci. Aenean volutpat vitae felis a sodales. Duis cursus orci in egestas rhoncus. In orci nisl, consequat vel orci vel, iaculis consectetur quam. Duis magna orci, accumsan ac nulla vitae, vulputate porttitor nulla. Nulla tempus aliquam dui, consequat gravida elit dapibus accumsan. Duis pulvinar ligula elit, ut vehicula lectus blandit quis. Vestibulum cursus dolor eget elit tempus blandit. Quisque dignissim auctor lectus rutrum blandit.</p>

<form method="POST">
  {{ xsrf_form_html() }}
  <div class="mb-3">
    <label for="filename" class="form-label">RPZ File:</label>
    <p class="form-control" id="filename">{{ filename }}</p>
  </div>
  <div class="mb-3">
    <label for="wacz" class="form-label">WACZ FILE:</label>
    <p class="form-control" id="wacz">
      {% if wacz %}
      present, {{ wacz.filesize }} bytes
      {% else %}
      none
      {% endif %}
    </p>
  </div>
  <div class="mb-3">
    <label for="hostname" class="form-label">Hostname:</label>
    <input type="text" name="hostname" id="hostname" class="form-control" value="{{ hostname }}">
  </div>
  <div class="mb-3">
    <label for="port_number" class="form-label">Port number:</label>
    <input type="number" name="port_number" id="port_number" class="form-control" min="1" max="65535" value="{{ port_number }}">
  </div>
  <p>Would you like to replace the web archive?</p>
  <div class="mb-3">
    <input type="submit" formaction="{{ reverse_url('webcapture_start_record', upload_short_id) }}" class="btn btn-primary" value="Record from browser">
    <input type="submit" formaction="{{ reverse_url('webcapture_start_crawl', upload_short_id) }}" class="btn btn-primary" value="Start automated crawl">
    <a href="{{ reverse_url('webcapture_upload_wacz', upload_short_id) }}" class="btn btn-secondary">Upload existing file</a>
  </div>
  {% if wacz %}
  <div class="mb-3">
    <input type="submit" formaction="{{ reverse_url('webcapture_download', upload_short_id, wacz=wacz.hash) }}" class="btn btn-primary" value="Download the finished Web RPZ file">
  </div>
  <div class="mb-3">
    <input type="submit" formaction="{{ reverse_url('webcapture_preview', upload_short_id, wacz=wacz.hash) }}" class="btn btn-secondary" value="Preview the result">
  </div>
  {% endif %}
</form>

{% endblock content %}
